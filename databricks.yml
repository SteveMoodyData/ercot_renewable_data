resources:
  jobs:
    ERCOT_Renewable_Energy_Daily_Pipeline:
      name: ERCOT Renewable Energy Daily Pipeline
      email_notifications:
        on_failure:
          - stevemoody@gmail.com
      schedule:
        quartz_cron_expression: 0 0 7 * * ?
        timezone_id: America/Chicago
        pause_status: UNPAUSED
      tasks:
        - task_key: bronze_solar_wind
          notebook_task:
            notebook_path: /Workspace/Repos/ercot_renewable_ingestion/ercot_renewable_data/01_bronze_ingestion
            base_parameters:
              load_type: incremental
              sources: solar_hourly,wind_hourly,solar_hourly_regional,wind_hourly_regional
            source: WORKSPACE
        - task_key: bronze_load_fuel
          notebook_task:
            notebook_path: /Workspace/Repos/ercot_renewable_ingestion/ercot_renewable_data/01_bronze_ingestion
            base_parameters:
              load_type: incremental
              sources: load_forecast,fuel_mix
            source: WORKSPACE
        - task_key: bronze_lmp
          notebook_task:
            notebook_path: /Workspace/Repos/ercot_renewable_ingestion/ercot_renewable_data/01_bronze_ingestion
            base_parameters:
              load_type: incremental
              sources: lmp_dam
            source: WORKSPACE
        - task_key: silver_transforms
          depends_on:
            - task_key: bronze_solar_wind
            - task_key: bronze_load_fuel
            - task_key: bronze_lmp
          notebook_task:
            notebook_path: /Workspace/Repos/ercot_renewable_ingestion/ercot_renewable_data/02_silver_transformations
            source: WORKSPACE
        - task_key: gold_aggregations
          depends_on:
            - task_key: silver_transforms
          notebook_task:
            notebook_path: /Workspace/Repos/ercot_renewable_ingestion/ercot_renewable_data/03_gold_aggregations
            source: WORKSPACE
      queue:
        enabled: true
